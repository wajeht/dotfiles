set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

set -g prefix C-a
unbind C-b
bind-key C-a send-prefix

unbind %
bind | split-window -h

unbind '"'
bind - split-window -v

unbind r
bind r source-file ~/.tmux.conf

bind j resize-pane -D 5
bind k resize-pane -U 5
bind l resize-pane -R 5
bind h resize-pane -L 5

bind -r m resize-pane -Z

set -g mouse on

set-window-option -g mode-keys vi

bind-key -T copy-mode-vi 'v' send -X begin-selection # 'v' to begin selection
bind-key -T copy-mode-vi 'y' send -X copy-selection # 'y' to copy

unbind -T copy-mode-vi MouseDragEnd1Pane # Don't exit copy mode with mouse drag

set -sg escape-time 10 # Remove esc delay in Neovim

# Tmux sessionizer - bind to prefix + f to open project picker in new window
bind-key -r f run-shell "tmux neww ~/.config/scripts/tmux-sessionizer.sh"

# Window navigation like browser/VS Code tabs
bind-key -n C-Tab next-window               # Ctrl+Tab = next window
bind-key -n C-BTab previous-window          # Ctrl+Shift+Tab = previous window

# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-resurrect' # Persist sessions
set -g @plugin 'tmux-continuum' # Auto-save sessions

set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'

# Status bar configuration for VS Code Dark Modern theme
set -g status on
set -g status-position top           # Move status bar to top
set -g status-interval 1             # Refresh every second
set -g status-justify left           # Left align window list
set -g status-right-length 50
set -g status-right "%I:%M %p %d %b %Y"

# VS Code Dark Modern Theme Colors (Transparent Black Compatible)
# Matching transparent black Neovim + Ghostty setup
set -g status-style "bg=#000000,fg=#CCCCCC"          # Pure black background with light gray text
set -g window-status-style "bg=#000000,fg=#666666"   # Black background with darker gray for inactive windows
set -g window-status-current-style "bg=#000000,fg=#FFFFFF" # Black background with white text for active window
set -g pane-border-style fg="#333333"      # Very dark gray for inactive pane borders
set -g pane-active-border-style fg="#666666" # Slightly lighter gray for active pane border

# Minimal window status format for clean transparent look
set -g window-status-format " #I #W "
set -g window-status-current-format " #I #W "
set -g window-status-separator ""

# Additional transparency-friendly settings
set -g status-style "bg=default"    # Use terminal default background
set -g window-status-style "bg=default"  # Use terminal default background

run '~/.tmux/plugins/tpm/tpm' # Initialize TPM (keep at bottom)
